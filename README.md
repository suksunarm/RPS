# RPS
 การเขียน smart contract เพื่อสร้างเกมพนันเป่ายิงฉุบแบบ Advance ที่มีความปลอดภัยและโปร่งใส


# การทำงานของตัวเกม RPS

# โค้ดที่ป้องกันการ lock เงินไว้ใน contract
- สร้างฟังก์ชัน withdrawIfTimeout เพิ่อป้องกันเงินถูก lock  จากกรณีที่มีผู้เล่นเพียงคนเดียว และ กรณีมีผู้เล่นครบทั้งสองคน แต่ไม่มีการเลือกช้อย โดยทั้งสองเงื่อนไขกำหนดให้อยู่ในระยะเวลา 6 นาที ถ้าครบเวลาที่กำหนดจะให้ทำการถอนเงินออกได้ ในกรณีแรก : จะเป็นการถอน reward ออกมาเต็มจำนวนให้ผู้เล่น และในกรณีที่สอง : จะเป็นการแบ่ง reward กันคนละครึ่งเพราะผมคิดว่าเมื่อเวลาผ่านไปไม่นานและยังไม่มีการเลือกช้อยเพื่อพนัน แสดงว่าอาจจะเกิดปัญหาที่ตัวผู้เล่นก็เป็นได้ เช่น เน็ตหลุด มีอุบัติเหตุ หรือภัยพิบัติ

# อธิบายโค้ดส่วนที่ทำการซ่อน choice และ commit
- ในการซ่อน choice เราจะใช้ฟังก์ชัน commitChoice เพื่อยืนยันการเลือกช้อยของผู้เล่นและไม่ได้เปิดเผยออกสู่ภายนอก โดยรับค่า hash  byte32 ที่ได้จาก output ของฟังก์ชัน GetHash

# อธิบายโค้ดส่วนที่จัดการกับความล่าช้าที่ผู้เล่นไม่ครบทั้งสองคนเสียที
- ใช้ฟังก์ชัน withdrawIfTimeout และ addPlayer ในการจัดการกับความล่าช้าของผู้เล่นที่ไม่ครบสักที โดยในข้างต้นได้กล่าวถึงกรณีของฟังก์ชันแรก withdrawIfTimeout ไปแล้วทั้ง 2 กรณี เมื่อเวลาผ่าน 6 นาทีโดยใช้ฟังก์ชันที่มาจากการ import TimeUnit.sol ผู้เล่นจะสามารถทำการถอนเงินได้เมื่อถึงเวลาที่กำหนด และในกรณีของฟังก์ชันที่สอง addPlayer จะเป็นการเพิ่มผู้เล่นให้ครบตามจำนวนที่ได้กำหนดไว้ โดยในเกมนี้เรากำหนดไว้ที่ 2 คน

# อธิบายโค้ดส่วนทำการ reveal และนำ choice มาตัดสินผู้ชนะ 
การทำ reveal เพื่อเปิดเผยออกสู่ภายนอก เป็นการยืนยันความถูกต้องของการเปิดเผยนั่นเอง เมื่อเราได้ทำการ reveal ไปแล้วจะไปเรียกใช้ฟังก์ชัน getChoiceFromReveal และใช้ค่าที่ได้จากการ reveal ไปแปลงเป็นช้อย เช่น 0 = Rock ค้อน ซึ่งก็คือเป็นการตรวจสอบว่า ค่าที่ได้จาก reveal ตรงกับช้อยที่ผู้เล่นได้ commit ไปก่อนหน้านี้หรือเปล่า เป็นการตรวจสอบการฉ้อโกงของผู้เล่น เพื่อทำให้เกมเป่ายิงฉุบมีความโปร่งใสมากยิ่งขึ้น
